---
layout: post
title: MySQL常用SQL语句/函数/存储过程
date: 2018-03-16 12:18:00
author: 薛师兄
tags: MySQL
---
一句话总结

```java
SELECT count(*) FROM user WHERE id>0 GROUP BY name HAVING count(*)>1 ORDER BY count（*）DESC;<br />
```

看懂了吗？

# 1.数据库

```sql
/*查看已有数据库*/
SHOW DATABASES;
```

```sql
/*创建数据库*/
CREATE DATABASE table_name;
```

```sql
/*查看表结构*/
SHOW COLUMNS FROM table_name;
```

```sql
/*使用数据库*/
SE dataBase_name;
```

```sql
/*删除数据库*/
DROP DATABASE table_name;
```

# 2.数据表

```sql
/*查看已有数据表*/
SHOW TABLES;
```

```sql
/*删除数据表*/
DROP TABLE table_name ;
```

```sql
/*创建数据表*/
CREATE TABLE IF NOT EXISTS `runoob_tbl`(
   `runoob_id` INT UNSIGNED AUTO_INCREMENT,
   `runoob_title` VARCHAR(100) NOT NULL,
   `runoob_author` VARCHAR(40),
   `submission_date` DATETIME,
   PRIMARY KEY ( `runoob_id` )
)ENGINE=InnoDB DEFAULT CHARSET=utf8;
```

# 3.增删改查

如果数据是字符型，必须使用单引号或者双引号，如：&rdquo;value&rdquo;

```sql
/*插入语句*/
INSERT INTO table_name ( field1, field2,...fieldN )
                       VALUES
                       ( value1, value2,...valueN );
```

```sql
/*查询语句*/
SELECT column_name,column_name
FROM table_name
WHERE clause
LIMIT n OFFSET m
```

LIMIT 限制条数 OFFSET 起始位置

```sql
/*更新语句*/
UPDATE table_name 
SET field1=new-value1, field2=new-value2
[WHERE clause]
```

```sql
/*删除语句*/
DELETE FROM table_name 
[WHERE Clause]
```

# 4.where子句

```sql
SELECT field1, field2,...fieldN 
FROM table_name
WHERE field1 ='somevalue1' [AND [OR]] filed2 = 'somevalue'
```

**实例**

```sql
SELECT * from runoob_tbl  WHERE runoob_author = 'Mary';
```

# 5.Order by排序

你可以使用 ASC 或 DESC 关键字来设置查询结果是按升序或降序排列。 默认情况下，它是按升序排列

```sql
SELECT field1, field2,...fieldN table_name1, table_name2...
ORDER BY field1, [field2...][ASC [DESC]]
```

**实例**

```sql
SELECT * from runoob_tbl ORDER BY submission_date ASC;
```

# 6.Like子句

SQL LIKE 子句中使用百分号 %字符来表示任意字符，类似于UNIX或正则表达式中的星号 *。 
如果没有使用百分号 %, LIKE 子句与等号 = 的效果是一样的。`LIKE '%ABC'`

```sql
SELECT field1, field2,...fieldN 
FROM table_name
WHERE field1 LIKE condition1 [AND [OR]] filed2 = 'somevalue'
```

**实例**

```sql
SELECT * from runoob_tbl  WHERE runoob_author LIKE '%Mary';
```

# 7.GROUP BY分组

GROUP BY 语句根据一个或多个列对结果集进行分组。

在分组的列上我们可以使用 COUNT, SUM, AVG,等函数。

```sql
SELECT column_name, function(column_name)
FROM table_name
WHERE column_name operator value
GROUP BY column_name;
```

**实例**

```sql
SELECT name, COUNT(*) FROM   tablename GROUP BY name;
```

# 8.事务

```sql
BEGIN 开始一个事务
ROLLBACK 事务回滚
COMMIT 事务确认
```

# 9.索引

```sql
/*创建表的时候指定*/
CREATE TABLE mytable(  
ID INT NOT NULL,   
username VARCHAR(16) NOT NULL,  
INDEX [indexName] (username(length))  
);  
```

```sql
/*单独指定*/
CREATE INDEX indexName ON mytable(username(length)); 
```

```sql
/*修改表结构(添加索引)*/
ALTER table tableName ADD INDEX indexName(columnName)
```

删除索引的语法

```sql
DROP INDEX [indexName] ON mytable; 
```

# 唯一索引

它与前面的普通索引类似，不同的就是：索引列的值必须唯一，但允许有空值。如果是组合索引，则列值的组合必须唯一。它有以下几种创建方式： 
创建索引

```sql
CREATE UNIQUE INDEX indexName ON mytable(username(length)) 
```

修改表结构

```sql
ALTER table mytable ADD UNIQUE [indexName] (username(length))
```

创建表的时候直接指定

```sql
CREATE TABLE mytable(  
ID INT NOT NULL,   
username VARCHAR(16) NOT NULL,  
UNIQUE [indexName] (username(length))  
);  
```

# 10.自定义函数

创建

```sql
　　CREATE [AGGREGATE] FUNCTION function_name(parameter_name type,
    　[parameter_name type,...])
　
　　RETURNS {STRING|INTEGER|REAL}

　　runtime_body
```

删除

```sql
DROP FUNCTION function_name
```

示例

```sql
DELIMITER //  /*这句话设置//为sql语句结束符，更改原先的; */
CREATE FUNCTION addTwoNumber(x SMALLINT UNSIGNED, Y SMALLINT UNSIGNED) 
RETURNS SMALLINT
BEGIN   
DECLARE a, b SMALLINT UNSIGNED DEFAULT 10;  /*定义变量a,b类型smallInt无符号默认值10*/
SET  a = x, b = y;  /*赋值语句*/
RETURN a+b;
END//
```

>更多自定义函数方面的知识推荐：[http://blog.csdn.net/rzq228/article/details/73498172](http://blog.csdn.net/rzq228/article/details/73498172)

# 11.存储过程

语法 
`CREATE PROCEDURE  过程名([[IN|OUT|INOUT] 参数名 数据类型[,[IN|OUT|INOUT] 参数名 数据类型&hellip;]])  [特性 ...]  过程体`

```sql
DELIMITER // /*这句话设置//为sql语句结束符，更改原先的; */
  CREATE PROCEDURE myproc(OUT s int)
    BEGIN
      SELECT COUNT(*) INTO s FROM students;  /*过程体*/
    END
    //
DELIMITER ; /*恢复*/
```

---

更多SQL教程参考请阅读：[Mysql中文教程](http://www.runoob.com/mysql/mysql-where-clause.html)