---
layout: post
title: Linux下如何让jar包程序在后台一直执行
date: 2018-08-09 21:15:00
author: 薛勤
tags: Java
---
### shell命令

```
nohup java -jar xxx.jar &
```

`&`：使用&命令后，作业被提交到后台运行，当前控制台没有被占用，但是一但把当前控制台关掉(退出帐户时)，作业就会停止运行。

`nohub`：nohup命令可以在你退出帐户之后继续运行相应的进程。nohup就是不挂起的意思( no hang up)。默认让程序控制台输出转移到nohub.out文件，位置在当前命令所在目录。

你也可以更改nohub.out文件为其他，

```
command >out.file 2>&1 &
```
-command>out.file是将command的输出重定向到out.file文件，即输出内容不打印到屏幕上，而是输出到out.file文件中。

-2>&1 是将标准出错重定向到标准输出，这里的标准输出已经重定向到了out.file文件，即将标准出错也输出到out.file文件中。

-最后一个&， 是让该命令在后台执行。


### 退出

还有最关键的一步，在退出shell会话时，不可直接关闭程序，应输入命令

```
exit
```

直接点关闭程序按钮关闭终端，会断掉该命令所对应的session，导致nohup对应的进程被通知需要一起shutdown。这或许是你此刻不成功的原因吧~

示例
```
vi nohub.out //新建log文件
chmod 777 ./nohub.out //赋予读+写+执行权限
```



